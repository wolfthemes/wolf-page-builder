/*! Wolf Page Builder v1.0.0b */ 
var WolfPageBuilderAdminEditor=WolfPageBuilderAdminEditor||{},console=console||{},WPBAdminParams=WPBAdminParams||{};WolfPageBuilderAdminEditor=function(a){"use strict";return{node:null,prepend:null,dialogTitle:null,markup:a("#wpb-markup"),init:function(){var b=this;this.dialogInit(),this.initDialogBoxes(),this.showTemplates(),this.setRowTitles(),this.openRowDialog(),this.openSettingsDialog(),this.openElementsDialog(),this.addNewRow(),this.removeRow(),this.duplicateRow(),this.collapseRow(),this.removeElement(),this.duplicateElement(),this.sortableElement(),this.sortableElementChild(),this.sortableRow(),this.toolTip(),this.colorPicker(),this.fieldDependencies(),a(".wpb-refresh").on("click",function(){b.shortcodeToMarkup()})},insertTemplateContent:function(){var b,c=this,d=a("#wpb_shortcodes_textarea");a(".wpb-template-img").on("click",function(e){e.preventDefault(),b={action:"wpb_get_template_shortcode_markup",name:a(this).attr("id")},a.post(WPBAdminParams.adminUrl,b,function(a){d.html(a),c.shortcodeToMarkup()})})},showTemplates:function(){if(this.markup.is(":empty")){var b=this;a.post(WPBAdminParams.adminUrl,{action:"wpb_ajax_get_templates"},function(a){b.markup.addClass("wpb-panel-show-templates").html(a),b.insertTemplateContent(),b.addNewRow(),b.openElementsDialog(),b.openSettingsDialog(),b.sortableElement(),b.sortableElementChild(),b.sortableRow(),b.openRowDialog()})}},resetPanel:function(){this.markup.hasClass("wpb-panel-show-templates")&&this.markup.empty().removeClass("wpb-panel-show-templates")},insertElement:function(b){b=b||null;var c,d,e,f=this,g=a("#wpb-settings-form"),h=g.data("element"),i=g.data("element-has-child"),j="",k=[],l={},m="",n="",o="",p="",q=!1;this.resetPanel(),"row_columns_layout"===h||"row_blocks_layout"===h?(d=g.serializeArray(),a.each(d,function(){"layout"===this.name&&(m=this.value),"row_type"===this.name&&(n=this.value)}),o={action:"wpb_ajax_get_row_layout",layout:m,row_type:n},a.post(WPBAdminParams.adminUrl,o,function(d){a(b).find(".wpb-element-container").addClass("old-col").hide(),a(b).hide().append(d),a(b).find(".old-col").each(function(d){d++,a(this).find(".wpb-col-action").remove(),c=a(this).html(),a(b).find(".wpb-element-container:not(.old-col)").eq(d-1).length&&a(b).find(".wpb-element-container:not(.old-col)").eq(d-1).append(c)}),a(".old-col").remove(),a(b).removeClass("wpb-1-cols wpb-2-cols wpb-3-cols wpb-4-cols"),a(b).addClass("wpb-"+a(b).find(".wpb-element-container:not(.old-col)").length+"-cols").attr("data-layout",a(b).find(".wpb-element-container:not(.old-col)").length+"-cols").show(),f.reInitPanel()})):"row_columns"===h||"row_blocks"===h||"column"===h||"block"===h?(d=g.serializeArray(),a.each(d,function(){j+=" data-"+this.name+'="'+this.value+'"',"layout"===this.name&&(m=this.value),"row_type"===this.name&&(n=this.value)}),b?(a.each(d,function(){b.attr("data-"+this.name,this.value)}),f.setRowTitles(b),f.reInitPanel()):(o={action:"wpb_ajax_get_row_markup",element:h,layout:m,row_type:n},a.post(WPBAdminParams.adminUrl,o,function(a){f.prepend?f.markup.prepend('<section class="wpb_row wpb_'+h+" wpb-"+n+" wpb-"+m+'" '+j+">"+a+"</section>"):f.markup.append('<section class="wpb_row wpb_'+h+" wpb-"+n+" wpb-"+m+'" '+j+">"+a+"</section>"),f.reInitPanel()}))):(p=h,b?q=!0:e=1===i?"article":"figure",b=b||a("<"+e+" />"),b.addClass(p),1===i&&b.addClass("wpb-element-has-children"),d=f.serializeForm(g),o={action:"wpb_ajax_sanitize_data",form_data:d,element:h,edit:q},a.post(WPBAdminParams.adminUrl,o,function(c){if(a.each(a.parseJSON(c),function(){this.value?(l={},l={name:this.name,value:this.value},k.push(l),b.attr("data-"+this.name,this.value)):b.removeAttr("data-"+this.name)}),q){var d={action:"wpb_ajax_get_elements_params",element:h,params:k};1!==i&&a.post(WPBAdminParams.adminUrl,d,function(c){a(b).find(".wpb-element-params").empty().html(c),f.reInitPanel()})}else a(".wpb-active-container").append(b),o={action:"wpb_ajax_get_elements_markup",element:h},a.post(WPBAdminParams.adminUrl,o,function(c){a(b).append(c);var d={action:"wpb_ajax_get_elements_params",element:h,params:k};a.post(WPBAdminParams.adminUrl,d,function(c){a(b).find(".wpb-element-params").empty().html(c),f.reInitPanel()})})}))},shortcodeToMarkup:function(){var b=this,c=b.markup,d=a("#wpb_shortcodes_textarea").html(),e=a("#wpb_markup_textarea");a(".wp-editor-area");a.post(WPBAdminParams.adminUrl,{action:"wpb_ajax_shortcode_to_markup_admin",markup:d},function(a){c.html(a),e.html(a),b.openElementsDialog(),b.openSettingsDialog(),b.sortableElement(),b.sortableElementChild(),b.sortableRow()})},dialogInit:function(){var b='<div id="wpb-settings-dialog" /><div id="wpb-elements-dialog" /><div id="wpb-row-dialog" />';a("#wpwrap").append(b),a.post(WPBAdminParams.pluginUrl+"/inc/admin/dialog/row.php","",function(b){a("#wpb-row-dialog").html(b)})},initDialogBoxes:function(){var b=this;a("#wpb-row-dialog").dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,minWidth:600,minHeight:300,title:WPBAdminParams.chooseRowText,open:function(){b.dialogTitle=null},buttons:{Cancel:function(){a(this).dialog("close")}}}),a("#wpb-elements-dialog").dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,minWidth:1e3,minHeight:800,title:WPBAdminParams.elementsListTitle,open:function(){b.dialogTitle=null}}),a("#wpb-settings-dialog").dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,minWidth:650,minHeight:450,open:function(){a("span.ui-dialog-title").text(b.dialogTitle),b.dialogTitle=null},close:function(){a("#wpb-settings-dialog").empty(),tinymce.remove(),b.dialogTitle=null},buttons:{Add:function(){tinyMCE.triggerSave(),b.insertElement(b.node),a("#wpb-row-dialog").dialog("close"),a(this).dialog("close"),a("#wpb-settings-dialog").empty(),tinymce.remove()},Cancel:function(){a(this).dialog("close"),a("#wpb-settings-dialog").empty(),tinymce.remove()}}})},openRowDialog:function(){var b=this;a(".wpb-add-row").on("click",function(c){c.preventDefault(),b.prepend="wpb-add-row-prepend"===a(this).attr("id"),a("#wpb-row-dialog").dialog("open"),b.openSettingsDialog(),b.addNewRow()})},openElementsDialog:function(){var b,c=this;a(".wpb-view-elements").on("click",function(){event.preventDefault(),b=a(this).parents(".wpb-element-container"),a(".wpb-element-container").removeClass("wpb-active-container"),b.addClass("wpb-active-container"),c.setElementsList(),a("#wpb-elements-dialog").dialog("open")})},addNewRow:function(){var b=this;a(".wpb-new-row").on("click",function(){row_type=a(this).data("row-type");var c={action:"wpb_ajax_get_new_row",type:type};a.post(WPBAdminParams.adminUrl,c,function(a){a&&(b.prepend?b.markup.prepend(a):b.markup.append(a)),b.reInitPanel()}),a("#wpb-elements-dialog").dialog("close"),a("#wpb-row-dialog").dialog("close")})},openSettingsDialog:function(){var b=this;a(".wpb-element").on("click",function(){var c=a(this),d=c.data("element");b.setDialogSettings(d),b.dialogTitle=a(this).attr("original-title")?a(this).attr("original-title"):a(this).attr("title"),a("#wpb-elements-dialog").dialog("close"),a("#wpb-row-dialog").dialog("close"),a("#wpb-settings-dialog").dialog("open")}),b.markup.on("click",".wpb-edit-row, .wpb-layout-row, .wpb-edit-column, .wpb-edit-element",function(){var c,d=a(this),e=d.data("element");b.dialogTitle=a(this).attr("original-title")?a(this).attr("original-title"):a(this).attr("title"),b.node=d.parent().parent(),c=b.getDataAttributes(b.node),b.setDialogSettings(e,c),a("#wpb-settings-dialog").dialog("open")})},setElementsList:function(b){var c=this,d={action:"wpb_ajax_get_elements"};a.post(WPBAdminParams.adminUrl,d,function(b){a("#wpb-elements-dialog").empty().html(b),c.openSettingsDialog()})},setDialogSettings:function(b,c){var d=this,e={action:"wpb_ajax_get_element_settings",element:b,values:c};a.post(WPBAdminParams.adminUrl,e,function(b){tinymce.remove(),a("#wpb-settings-dialog").empty().html(b),d.sortableImagesSet(),d.reInitSettingsForm()})},sortableImagesSet:function(){a(".wpb-images-set").sortable({update:function(){a(this).parent().find("input").val(a(this).sortable("toArray",{attribute:"data-attachment-id"}))},helper:"clone",items:".wpb-image"})},reInitPanel:function(){this.addNewRow(),this.updateTextareas(),this.openElementsDialog(),this.openSettingsDialog(),this.sortableElement(),this.sortableElementChild(),this.sortableRow(),this.node=null,this.prepend=null,this.enableUpdateButton()},updateTextareas:function(){var b=this,c=b.markup.html(),d=a("#wpb_shortcodes_textarea"),e=a("#wpb_markup_textarea"),f=a(".wp-editor-area");b.disableUpdateButton(),a.post(WPBAdminParams.adminUrl,{action:"wpb_ajax_get_markup_content",markup:c},function(f){e.empty().html(f),a.post(WPBAdminParams.adminUrl,{action:"wpb_ajax_get_shortcode_content",markup:c},function(a){d.empty().html(a),b.enableUpdateButton()})}),a.post(WPBAdminParams.adminUrl,{action:"wpb_ajax_get_clean_content",markup:c},function(a){f.empty().html(a),b.enableUpdateButton()})},disableUpdateButton:function(){a("input#publish").addClass("disabled")},enableUpdateButton:function(){setTimeout(function(){a("input#publish").removeClass("disabled")},2e3)},reInitSettingsForm:function(){this.colorPicker(),this.fieldDependencies()},removeRow:function(){var b,c=this;c.markup.on("click",".wpb-remove-row",function(){confirm(WPBAdminParams.removeRowConfirmation)&&(b=a(this).parents("section"),b.fadeOut("fast",function(){a(this).remove(),a(".tipsy").remove(),c.reInitPanel(),c.showTemplates()}))})},removeElement:function(){var b,c,d=this;d.markup.on("click",".wpb-remove-element",function(){b=a(this).parent().parent(),c=b.parents(".wpb-element-has-children"),b.hasClass("wpb-element-child")&&c.find(".wpb-element-child").length<2?alert(WPBAdminParams.childrenElementLenght):confirm(WPBAdminParams.removeElementConfirmation)&&b.fadeOut("fast",function(){a(this).remove(),a(".tipsy").remove(),d.reInitPanel()})})},duplicateElement:function(){var b,c=this;c.markup.on("click",".wpb-duplicate-element",function(){b=a(this).parent().parent(),b.after(b.clone()),c.reInitPanel()})},duplicateRow:function(){var b,c=this;c.markup.on("click",".wpb-duplicate-row",function(){b=a(this).parents("section"),b.after(b.clone()),c.reInitPanel()})},collapseRow:function(){var b=this;b.markup.on("click",".wpb-collapse-row",function(){var b=a(this).parents(".wpb_row");b.hasClass("wpb-row-collapsed")?b.removeClass("wpb-row-collapsed"):b.addClass("wpb-row-collapsed")})},sortableElementChild:function(){var b,c=this;a(".wpb-move-element-item").mousedown(function(){b=a(".wpb-element-has-children"),b.sortable({placeholder:"state-highlight",item:".wpb-element-child",update:function(){c.reInitPanel()}}).disableSelection()}).bind("mouseup mouseleave",function(){a(this).parents(".wpb-element-has-children").disableSelection(),c.enableUpdateButton()})},sortableElement:function(){var b=this;a(".wpb-element-container").sortable({placeholder:"state-highlight",connectWith:".wpb-element-container",helper:"clone",appendTo:"body",zIndex:1e4,update:function(){b.reInitPanel()}}).disableSelection()},sortableRow:function(){var b=this;a(".wpb-move-row").mousedown(function(){b.disableUpdateButton(),b.markup.sortable({placeholder:"state-highlight",opacity:.6,accept:"state-default",update:function(){b.reInitPanel()}}).disableSelection()}).bind("mouseup mouseleave",function(){b.markup.disableSelection(),b.enableUpdateButton()})},toolTip:function(){a(".wpb-tipsy").tipsy({fade:!0,live:!0,gravity:"s"})},colorPicker:function(){var b={palettes:WPBAdminParams.defaultPalette};({})!==WPBAdminParams&&WPBAdminParams.defaultPalette?a(".wpb-param-colorpicker").wpColorPicker(b):a(".wpb-param-colorpicker").wpColorPicker()},fieldDependencies:function(){a(".wpb-has-dependency").each(function(){var b,c=a(this),d=a(this).data("dependency-element"),e=a(this).data("dependency-values");b=a(".wpb-param-fieldset-"+d).find("select").val(),-1!==a.inArray(b,e)?c.show():c.hide(),a(".wpb-param-fieldset-"+d).find("select").on("change",function(){b=a(this).val(),-1!==a.inArray(b,e)?c.show():c.hide()})})},getDataAttributes:function(b){var c={},d=/^data\-(.+)$/;return a.each(b.get(0).attributes,function(a,b){if(d.test(b.nodeName)){var e=b.nodeName.match(d)[1];c[e]=b.nodeValue}}),c},setRowTitles:function(b){b=b||null;var c;b?(c=b.attr("data-anchor"),c&&b.find(".wpb-row-title").empty().append("#"+c)):a(".wp_row").each(function(){c=a(this).attr("data-anchor"),c&&a(this).find(".wpb-row-title").empty().append("#"+c)})},serializeForm:function(b){var c,d=[];return b.find("input, textarea, select, checkbox").each(function(){c={},c.name=a(this).attr("name"),c.value=a(this).val(),c.type=a(this).data("element-type"),"checkbox"==c.type?a(this).is(":checked")&&d.push(c):d.push(c)}),d},addAdminPointers:function(b){a(b).pointer({content:pointer.options.content,position:{edge:"left",align:"left"},close:function(){a.post(ajaxurl,{pointer:b.attr("id"),action:"dismiss-wp-pointer"})}}).pointer("open")},sanitizeSlug:function(a){return a=a.replace(/ /g,"-"),escape(a.toLowerCase())}}}(jQuery),function(a){"use strict";WolfPageBuilderAdminEditor.init(),a(window).load(function(){})}(jQuery);var WPBAdminParams=WPBAdminParams||{};!function(a){"use strict";a(document).on("click",".wpb-param-set-img, .wpb-param-set-bg",function(b){b.preventDefault();var c=a(this).parent(),d=wp.media({title:WPBAdminParams.chooseImage,library:{type:"image"},multiple:!1}).on("select",function(){var b=d.state().get("selection"),e=b.first().toJSON();a("input",c).val(e.id),a("img",c).attr("src",e.url).show()}).open()}),a(".wpb-images-set").sortable({update:function(){a(this).parent().find("input").html(a(this).sortable("toArray",{attribute:"data-attachment-id"}))},helper:"clone",items:".wpb-image"}),a(document).on("click",".wpb-param-set-multiple-img",function(b){if(b.preventDefault(),e)return void e.open();var c=a(this).parent(),d=c.find("input"),e=wp.media.frames.file_frame=wp.media({title:WPBAdminParams.chooseMultipleImage,library:{type:"image"},multiple:"add",button:{text:WPBAdminParams.chooseMultipleImage}});e.on("close",function(){for(var b=e.state().get("selection"),d=[],f="",g=b.length,h=b.models,i=[],j=0;g>j;j++)i.push(h[j].id);a("input",c).val(i),b.map(function(a){var b=a.toJSON(),c=b.sizes&&b.sizes.thumbnail?b.sizes.thumbnail.url:b.url;b.id&&(f+='<span class="wpb-image" data-attachment-id="'+b.id+'">						<span class="wpb-remove-img"></span>						<img src="'+c+'">					</span>',d.push(b.id))}),d.length&&c.find(".wpb-images-set").html(f).sortable("refresh")}),e.on("open",function(){var b=d.val().split(","),c=e.state().get("selection");b&&b.length&&a.each(b,function(a,b){var d=wp.media.attachment(b);d.fetch(),c.add(d?[d]:[])})}),e.open()}),a(document).on("click",".wpb-param-reset-all-img",function(b){b.preventDefault(),confirm(WPBAdminParams.confirmRemoveAllImages)&&(a(this).parent().find("input").val(""),a(this).parent().find(".wpb-images-set").empty())}),a(document).on("click",".wpb-param-remove-img",function(b){b.preventDefault();var c=a(this).parent();c.data("attachment-id")}),a(document).on("click",".wpb-param-set-file",function(b){b.preventDefault();var c=a(this).parent(),d=wp.media({title:WPBAdminParams.chooseFile,multiple:!1}).on("select",function(){var b=d.state().get("selection"),e=b.first().toJSON();a("input",c).val(e.url),a("span",c).html(e.url).show()}).open()}),a(document).on("click",".wpb-param-reset-img, .wpb-param-reset-bg",function(b){b.preventDefault(),a(this).parent().find("input").val(""),a(this).parent().find(".wpb-param-img-preview").hide()}),a(document).on("click",".wpb-param-reset-file",function(b){b.preventDefault(),a(this).parent().find("input").val(""),a(this).parent().find("span").empty()})}(jQuery),function(a){"use strict";a(".wolf-close-admin-notice").click(function(){a(this).parent().parent().slideUp()}),a(".wolf-dismiss-admin-notice").click(function(){var b,c=a(this);c.attr("id")&&(b=c.attr("id"),a.cookie(b,"false",{path:"/",expires:365}),a(this).parent().parent().slideUp())})}(jQuery);