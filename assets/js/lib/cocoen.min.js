!function(a,b,c,d){"use strict";function e(b,c){this.options=a.extend({},g,c),this.$element=a(b),this.init()}var f="cocoen",g={dragElementSelector:".cocoen__drag"};e.prototype={init:function(){this.createElements(),this.setDimensions(),this.addEventListeners()},createElements:function(){this.$element.append('<span class="'+this.options.dragElementSelector.replace(".","")+'"></span>'),this.$element.find("img:first-child").wrap("<div></div>"),this.$dragElement=this.$element.find(this.options.dragElementSelector),this.$before=this.$element.find("div:first-child"),this.$beforeImg=this.$before.find("img")},addEventListeners:function(){this.$element.on("click",this.onTap.bind(this)),this.$element.on("mousedown touchstart",this.options.dragElementSelector,this.onDragStart.bind(this)),this.$element.on("mousemove touchmove",this.onDrag.bind(this)),a(b).on("mouseup",this.onDragEnd.bind(this)),a(b).on("resize",this.setDimensions.bind(this))},onTap:function(a){a.preventDefault(),this.leftPos=a.pageX?a.pageX:a.originalEvent.touches[0].pageX,this.requestDrag()},onDragStart:function(a){a.preventDefault();var b=a.pageX?a.pageX:a.originalEvent.touches[0].pageX;this.posX=this.$dragElement.offset().left+this.dragWidth-b,this.isDragging=!0},onDragEnd:function(a){a.preventDefault(),this.isDragging=!1},onDrag:function(a){a.preventDefault(),this.isDragging&&(this.moveX=a.pageX?a.pageX:a.originalEvent.touches[0].pageX,this.leftPos=this.moveX+this.posX-this.dragWidth,this.requestDrag())},requestDrag:function(){requestAnimationFrame(this.drag.bind(this))},drag:function(){this.leftPos<this.minLeftPos?this.leftPos=this.minLeftPos:this.leftPos>this.maxLeftPos&&(this.leftPos=this.maxLeftPos);var a=100*(this.leftPos+this.dragWidth/2-this.containerOffset)/this.containerWidth+"%";this.$dragElement.css("left",a),this.$before.css("width",a)},setDimensions:function(){this.$beforeImg.css("width",this.$element.width()),this.dragWidth=this.$dragElement.outerWidth(),this.containerWidth=this.$element.outerWidth(),this.containerOffset=this.$element.offset().left,this.minLeftPos=this.containerOffset+10,this.maxLeftPos=this.containerOffset+this.containerWidth-this.dragWidth-10,this.isDragging=!1}},a.fn[f]=function(b){return this.each(function(){a.data(this,"plugin_"+f)||a.data(this,"plugin_"+f,new e(this,b))})}}(jQuery,window,document);