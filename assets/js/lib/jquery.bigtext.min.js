/*! BigText - v0.1.8 - 2015-04-01
 * https://github.com/zachleat/bigtext
 * Copyright (c) 2015 Zach Leatherman (@zachleat)
 * MIT License */
!function(a,b){"use strict";function c(a,b,c,d,e,f,g){var h;if(g="number"==typeof g?g:0,a.css(c,d+f),h=a.width(),h>=b){if(
// console.log(width, ' previous: ' + previousWidth, property + ' at ' + interval, 'prior: ' + (parseFloat(size) - interval), 'new:' + parseFloat(size));
a.css(c,""),h===b)return{match:"exact",size:parseFloat((parseFloat(d)-.1).toFixed(3))};
// Since this is an estimate, we calculate how far over the width we went with the new value.
// If this is word-spacing (our last resort guess) and the over is less than the under, we keep the higher value.
// Otherwise, we revert to the underestimate.
var i=b-g,j=h-b;return{match:"estimate",size:parseFloat((parseFloat(d)-("word-spacing"===c&&g&&i>j?0:e)).toFixed(3))}}return h}function d(a,d,e,f,g){var h=a.clone(!0).addClass("bigtext-cloned").css({fontFamily:a.css("font-family"),textTransform:a.css("text-transform"),wordSpacing:a.css("word-spacing"),letterSpacing:a.css("letter-spacing"),position:"absolute",left:i.DEBUG_MODE?0:-9999,top:i.DEBUG_MODE?0:-9999}).appendTo(document.body),j=[],k=[],l=[],m=[];return d.css("float","left").each(function(){var a,d,h=b(this),
// TODO replace 8, 4 with a proportional size to the calculated font-size.
k=i.supports.wholeNumberFontSizeOnly?[8,4,1]:[8,4,1,.1];if(h.hasClass(i.EXEMPT_CLASS))return j.push(null),m.push(null),void l.push(!1);
// TODO we can cache this ratio?
var n=32,// font size in px
o=parseFloat(h.css("font-size")),p=(h.width()/o).toFixed(6);d=parseInt(e/p,10)-n;a:for(var q=0,r=k.length;r>q;q++)b:for(var s=1,t=10;t>=s;s++){if(d+s*k[q]>f){d=f;break a}if(a=c(h,e,"font-size",d+s*k[q],k[q],"px",a),"number"!=typeof a){if(d=a.size,"exact"===a.match)break a;break b}}m.push(e/d),d>f?(j.push(f),l.push(!1)):g&&g>d?(j.push(g),l.push(!0)):(j.push(d),l.push(!1))}).each(function(a){var d,f=b(this),g=0,h=1;if(f.hasClass(i.EXEMPT_CLASS))return void k.push(null);
// must re-use font-size, even though it was removed above.
f.css("font-size",j[a]+"px");for(var l=1,m=3;m>l;l+=h)if(d=c(f,e,"word-spacing",l,h,"px",d),"number"!=typeof d){g=d.size;break}f.css("font-size",""),k.push(g)}).removeAttr("style"),i.DEBUG_MODE?h.css({"background-color":"rgba(255,255,255,.4)"}):h.remove(),{fontSizes:j,wordSpacings:k,ratios:m,minFontSizes:l}}var e=0,f=b("head"),g=a.BigText,h=b.fn.bigtext,i={DEBUG_MODE:!1,DEFAULT_MIN_FONT_SIZE_PX:null,DEFAULT_MAX_FONT_SIZE_PX:528,GLOBAL_STYLE_ID:"bigtext-style",STYLE_ID:"bigtext-id",LINE_CLASS_PREFIX:"bigtext-line",EXEMPT_CLASS:"bigtext-exempt",noConflict:function(c){return c&&(b.fn.bigtext=h,a.BigText=g),i},supports:{wholeNumberFontSizeOnly:function(){if(!("getComputedStyle"in a))return!0;var c=b("<div/>").css({position:"absolute","font-size":"14.1px"}).insertBefore(b("script").eq(0)),d=a.getComputedStyle(c[0],null),e=d&&"14px"===d.getPropertyValue("font-size");return c.remove(),e}()},init:function(){b("#"+i.GLOBAL_STYLE_ID).length||f.append(i.generateStyleTag(i.GLOBAL_STYLE_ID,[".bigtext * { white-space: nowrap; } .bigtext > * { display: block; }",".bigtext ."+i.EXEMPT_CLASS+", .bigtext ."+i.EXEMPT_CLASS+" * { white-space: normal; }"]))},bindResize:function(c,d){var e;b(a).unbind(c).bind(c,function(){e&&clearTimeout(e),e=setTimeout(d,100)})},getStyleId:function(a){return i.STYLE_ID+"-"+a},generateStyleTag:function(a,c){return b("<style>"+c.join("\n")+"</style>").attr("id",a)},clearCss:function(a){var c=i.getStyleId(a);b("#"+c).remove()},generateCss:function(a,b,c,d){var e=[];i.clearCss(a);for(var f=0,g=b.length;g>f;f++)e.push("#"+a+" ."+i.LINE_CLASS_PREFIX+f+" {"+(d[f]?" white-space: normal;":"")+(b[f]?" font-size: "+b[f]+"px;":"")+(c[f]?" word-spacing: "+c[f]+"px;":"")+"}");return i.generateStyleTag(i.getStyleId(a),e)},jQueryMethod:function(a){return i.init(),a=b.extend({minfontsize:i.DEFAULT_MIN_FONT_SIZE_PX,maxfontsize:i.DEFAULT_MAX_FONT_SIZE_PX,childSelector:"",resize:!0},a||{}),this.each(function(){var c=b(this).addClass("bigtext"),g=c.width(),h=c.attr("id"),j=a.childSelector?c.find(a.childSelector):c.children();h||(h="bigtext-id"+e++,c.attr("id",h)),a.resize&&i.bindResize("resize.bigtext-event-"+h,function(){i.jQueryMethod.call(b("#"+h),a)}),i.clearCss(h),j.addClass(function(a,b){return[b.replace(new RegExp("\\b"+i.LINE_CLASS_PREFIX+"\\d+\\b"),""),i.LINE_CLASS_PREFIX+a].join(" ")});var k=d(c,j,g,a.maxfontsize,a.minfontsize);f.append(i.generateCss(h,k.fontSizes,k.wordSpacings,k.minFontSizes))}),this.trigger("bigtext:complete")}};b.fn.bigtext=i.jQueryMethod,a.BigText=i}(this,jQuery);